folder-hook '$HOME/.mail/personal/*' 'source ~/.mutt/personalrc'
folder-hook '$HOME/.mail/insided/*' 'source ~/.mutt/insidedrc'
folder-hook '$HOME/.mail/insided/*' 'source ~/.mutt/mnlthrc

source '~/.mutt/personalrc'

mailboxes ~/.mail/personal/inbox/ ~/.mail/personal/archive/ ~/.mail/insided/inbox/ ~/.mail/insided/archive/ ~/.mail/mnlth/inbox/ ~/.mail/mnlth/archive/

set sleep_time=0
set spoolfile=+/

macro index <f2> '<change-folder>~/.mail/personal/inbox<enter>'
macro index <f3> '<change-folder>~/.mail/insided/inbox<enter>'
macro index <f4> '<change-folder>~/.mail/insided/inbox<enter>'

macro index,pager v1 '<change-folder>~/.mail/personal/inbox<enter>'
macro index,pager v2 '<change-folder>~/.mail/insided/inbox<enter>'
macro index,pager v3 '<change-folder>~/.mail/mnlth/inbox<enter>'

set editor=vim

bind pager j next-line
bind pager k previous-line
bind attach,index,pager \CD next-page
bind attach,index,pager \CU previous-page
bind pager g top
bind pager G bottom
bind attach,index g first-entry
bind attach,index G last-entry

bind pager v view-attachments

set nm_default_uri = "notmuch:///home/josip/.mail"

virtual-mailboxes "My INBOX" "notmuch://?query=tag:inbox"
macro index L "<enter-command>unset wait_key<enter><shell-escape>read -p 'notmuch query: ' x; echo \$x >~/.cache/mutt_terms<enter><limit>~i \"\`notmuch search --output=messages \$(cat ~/.cache/mutt_terms) | head -n 600 | perl -le '@a=<>;chomp@a;s/\^id:// for@a;$,=\"|\";print@a'\`\"<enter>" "show only messages matching a notmuch pattern"


alternative_order text/plain text/html
set mailcap_path    = ~/.mutt/mailcap
auto_view text/html

set pager_context=10


set date_format="%y-%m-%d %T"
set index_format="%d | %-30.30F %s"

set sort=threads
set sort_aux=reverse-last-date-received

set fast_reply=yes
set include=yes

set sidebar_visible = yes
set sidebar_short_path = yes

bind index,pager \Ck sidebar-prev
bind index,pager \Cj sidebar-next
bind index,pager \Cl sidebar-open

bind index,pager X change-vfolder
bind index,pager <Esc>X vfolder-from-query


set crypt_verify_sig = yes
set crypt_autosign = yes

set pgp_autosign=yes
set pgp_use_gpg_agent = yes
set pgp_sign_as = 6A69CC4C
set pgp_timeout = 3600
set crypt_autosign = yes
set crypt_replyencrypt = yes

source ~/.gpg.rc
source ~/.mutt/colors
